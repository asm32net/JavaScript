<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="Generator" content="EditPlusÂ®">
<meta name="Author" content="www.asm32.net">
<title>PA-util-base64encode.html</title>
</head>
<body>


<script type="text/javascript">
<!--
var base64EncodeChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

function base64encode(str) {
	var out, i, len;
	var c1, c2, c3;
	len = str.length;
	i = 0;
	out = "";
	while (i < len) {
		c1 = str.charCodeAt(i++) & 0xff;
		if (i == len) {
			out += base64EncodeChars.charAt(c1 >> 2);
			out += base64EncodeChars.charAt((c1 & 0x3) << 4);
			out += "==";
			break;
		}
		c2 = str.charCodeAt(i++);
		if (i == len) {
			out += base64EncodeChars.charAt(c1 >> 2);
			out += base64EncodeChars.charAt(((c1 & 0x3) << 4) | ((c2 & 0xF0) >> 4));
			out += base64EncodeChars.charAt((c2 & 0xF) << 2);
			out += "=";
			break;
		}
		c3 = str.charCodeAt(i++);
		out += base64EncodeChars.charAt(c1 >> 2);
		out += base64EncodeChars.charAt(((c1 & 0x3) << 4) | ((c2 & 0xF0) >> 4));
		out += base64EncodeChars.charAt(((c2 & 0xF) << 2) | ((c3 & 0xC0) >> 6));
		out += base64EncodeChars.charAt(c3 & 0x3F);
	}
	return out;
}

//-->
</script>

<p>
	<input value="encode base64" type="button" />
	<label><input type="checkbox">80chars</label>
</p>

<p><textarea cols="120" rows="12"></textarea></p>
<p><textarea cols="120" rows="12"></textarea></p>

<script type="text/javascript">
<!--
var _inputs = document.getElementsByTagName('input');
console.log(_inputs);
_inputs[0].onclick = function(){
	var _textareas = document.getElementsByTagName('textarea');
	var _content = base64encode(_textareas[0].value);
	if(_inputs[1].checked){
		var _content2 = ''
		for(var i=0; i<_content.length; i+= 80){
			_content2 += _content.substring(i, i+80) + '\n';
		}
		_textareas[1].value = _content2;
	}else{
		_textareas[1].value = _content;
	}
}
//-->
</script>

</body>
</html>
